# دليل نظام نقاط الولاء للمستخدمين

## نظرة عامة
تم تطوير نظام نقاط الولاء للمستخدمين العاديين (Members) في تطبيق الجيم. يتيح هذا النظام للمستخدمين:

- عرض نقاط الولاء الحالية
- تتبع تقدمهم نحو المستوى التالي
- عرض تاريخ المعاملات
- استبدال النقاط بالجوائز المتاحة

## الميزات الرئيسية

### 1. عرض النقاط
- **إجمالي النقاط**: النقاط الإجمالية المكتسبة
- **النقاط المتاحة**: النقاط القابلة للاستخدام
- **المستوى الحالي**: مستوى العضوية الحالي (Bronze, Silver, Gold, Platinum, Diamond)
- **النقاط المطلوبة**: للوصول للمستوى التالي

### 2. شريط التقدم
- عرض تقدم المستخدم نحو المستوى التالي
- ألوان مختلفة لكل مستوى
- نسبة مئوية للتقدم

### 3. تبويبات التنقل
- **نظرة عامة**: معلومات عن كيفية كسب النقاط ومستويات الولاء
- **المعاملات**: تاريخ جميع معاملات النقاط
- **المكافآت**: الجوائز المتاحة للاستبدال

### 4. نظام الجوائز
- عرض الجوائز المتاحة
- التحقق من إمكانية الاستبدال
- عرض المخزون المتاح
- تواريخ انتهاء الصلاحية

## كيفية كسب النقاط

| النشاط | النقاط |
|--------|--------|
| حضور حصة تدريبية | +50 نقطة |
| حضور حصة شخصية | +75 نقطة |
| إكمال خطة تمرين | +100 نقطة |
| تقييم 5 نجوم | +25 نقطة |
| إحالة صديق | +200 نقطة |
| مكافأة الدفع | +10 نقطة لكل دولار |
| عيد الميلاد | +100 نقطة |
| ذكرى العضوية | +150 نقطة |

## مستويات الولاء

| المستوى | النقاط المطلوبة | اللون |
|---------|----------------|-------|
| Bronze | 0-199 | أصفر |
| Silver | 200-499 | رمادي |
| Gold | 500-999 | ذهبي |
| Platinum | 1000-1999 | بنفسجي |
| Diamond | 2000+ | أزرق |

## أنواع المعاملات

- **earned**: نقاط مكتسبة
- **redeemed**: نقاط مستبدلة
- **admin_added**: نقاط مضافة من الإدارة
- **admin_deducted**: نقاط مخصومة من الإدارة
- **payment_bonus**: مكافأة دفع
- **attendance_bonus**: مكافأة حضور
- **expired**: نقاط منتهية الصلاحية

## فئات الجوائز

- **discount**: خصومات
- **free_session**: حصص مجانية
- **merchandise**: منتجات
- **subscription_extension**: تمديد العضوية
- **premium_feature**: ميزات مميزة
- **gift_card**: بطاقات هدايا

## الملفات المحدثة

### 1. `MemberLoyaltyPoints.tsx`
- واجهة المستخدم الرئيسية
- إدارة الحالة والبيانات
- وظائف الاستبدال والتحديث

### 2. `loyaltyService.ts`
- خدمات API للتفاعل مع الخادم
- دوال جلب النقاط والجوائز
- دوال الاستبدال والتاريخ

### 3. `constants.ts`
- ثوابت نظام نقاط الولاء
- قواعد كسب النقاط
- مستويات العضوية
- الأيقونات والألوان

## الاستخدام

```tsx
import MemberLoyaltyPoints from '@/components/member/MemberLoyaltyPoints';

// في صفحة المستخدم
<MemberLoyaltyPoints />
```

## API Endpoints المستخدمة

- `GET /loyalty-points/my-points` - جلب نقاط المستخدم الحالي
- `GET /loyalty-points/rewards` - جلب الجوائز المتاحة
- `GET /loyalty-points/history` - جلب تاريخ النقاط
- `POST /loyalty-points/redeem-reward` - استبدال جائزة

## ملاحظات مهمة

1. **الأمان**: جميع العمليات تتطلب مصادقة المستخدم
2. **الصلاحيات**: المستخدمون العاديون يمكنهم فقط عرض واستبدال النقاط
3. **التحديث التلقائي**: يتم تحديث البيانات بعد كل عملية استبدال
4. **معالجة الأخطاء**: يتم عرض رسائل خطأ واضحة للمستخدم
5. **التحقق**: يتم التحقق من إمكانية الاستبدال قبل تنفيذ العملية

## التطوير المستقبلي

- إضافة إشعارات للجوائز الجديدة
- نظام إحالة متقدم
- مكافآت موسمية
- تحليلات مفصلة للنقاط
- نظام نقاط منتهية الصلاحية
