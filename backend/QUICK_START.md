# ๐ ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน - ูุธุงู ููุงุท ุงูููุงุก

## ๐ ุงููุชุทูุจุงุช
- Node.js 18+
- MongoDB
- npm ุฃู yarn

## โก ุงูุชุดุบูู ุงูุณุฑูุน

### 1. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
npm install
```

### 2. ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ
```bash
# ุงูุณุฎ ููู .env.example ุฅูู .env
cp .env.example .env

# ุนุฏู ุงูููู ุจุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
MONGODB_URI=mongodb://localhost:27017/gym_system
JWT_SECRET=your_jwt_secret_here
PORT=3000
```

### 3. ุชุดุบูู ุงูุฎุงุฏู
```bash
# ูุถุน ุงูุชุทููุฑ
npm run dev

# ุฃู ูุถุน ุงูุฅูุชุงุฌ
npm start
```

### 4. ุงุฎุชุจุงุฑ ุงููุธุงู
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑุงุช ููุงุท ุงูููุงุก
npm run test:loyalty
```

## ๐ง ุงุฎุชุจุงุฑ API

### ุจุงุณุชุฎุฏุงู Postman
1. ุงุณุชูุฑุฏ ููู `Loyalty_Points_API.postman_collection.json`
2. ุนุฏู ุงููุชุบูุฑุงุช (base_url, tokens, user_id)
3. ุงุจุฏุฃ ุจุงุฎุชุจุงุฑ Authentication
4. ุซู ุงุฎุชุจุฑ ุจุงูู ุงูู endpoints

### ุจุงุณุชุฎุฏุงู curl
```bash
# ุฌูุจ ููุงุท ุงููุณุชุฎุฏู
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:3000/api/loyalty-points/my-points

# ุฅุถุงูุฉ ููุงุท (ูููุฏูุฑ)
curl -X POST \
     -H "Authorization: Bearer ADMIN_TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"userId":"user_id","points":50,"reason":"ููุงูุฃุฉ"}' \
     http://localhost:3000/api/loyalty-points/add
```

## ๐ ูุฑุงูุจุฉ ุงููุธุงู

### ุณุฌูุงุช ุงูุฎุงุฏู
```bash
# ูุฑุงูุจุฉ ุงูุณุฌูุงุช ูู ุงูููุช ุงููุนูู
tail -f logs/app.log
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงูุงุชุตุงู ุจู MongoDB
mongosh gym_system

# ุนุฑุถ ุงููุณุชุฎุฏููู ูููุงุทูู
db.users.find({}, {name: 1, loyaltyPoints: 1})

# ุนุฑุถ ุณุฌู ุงูููุงุท
db.rewards.find().sort({date: -1}).limit(10)
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:
1. **ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช**
   - ุชุฃูุฏ ูู ุชุดุบูู MongoDB
   - ุชุญูู ูู MONGODB_URI ูู .env

2. **ุฎุทุฃ ูู JWT**
   - ุชุฃูุฏ ูู JWT_SECRET ูู .env
   - ุชุญูู ูู ุตุญุฉ ุงูู token

3. **ุฎุทุฃ ูู ุงูุตูุงุญูุงุช**
   - ุชุฃูุฏ ูู ุฏูุฑ ุงููุณุชุฎุฏู (admin, trainer, member)
   - ุชุญูู ูู middleware ุงูุตูุงุญูุงุช

### ุณุฌูุงุช ุงูุฃุฎุทุงุก:
```bash
# ุนุฑุถ ุฃุฎุทุงุก ุฅุถุงูุฉ ุงูููุงุท
grep "ุฎุทุฃ ูู ุฅุถุงูุฉ ููุงุท" logs/app.log

# ุนุฑุถ ุฃุฎุทุงุก ุงูุงุณุชุจุฏุงู
grep "ุฎุทุฃ ูู ุงุณุชุจุฏุงู ุงูููุงุท" logs/app.log
```

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ุฌูุจ ุฅุญุตุงุฆูุงุช ุงูููุงุท:
```bash
curl -H "Authorization: Bearer ADMIN_TOKEN" \
     http://localhost:3000/api/loyalty-points/stats
```

### ุฌูุจ ุฃูุถู ุงููุณุชุฎุฏููู:
```bash
curl -H "Authorization: Bearer ADMIN_TOKEN" \
     http://localhost:3000/api/loyalty-points/top-users?limit=5
```

## ๐ ุงูุชูุงูู ุงูุชููุงุฆู

### ูุน ูุธุงู ุงููุฏููุนุงุช:
- ุนูุฏ ุฅูุดุงุก ุฏูุนุฉุ ูุชู ุฅุถุงูุฉ ุงูููุงุท ุชููุงุฆูุงู
- ูู 10 ุฌููู = ููุทุฉ ูุงุญุฏุฉ

### ูุน ูุธุงู ุงูุญุถูุฑ:
- ุนูุฏ ุชุณุฌูู ุงูุญุถูุฑุ ูุชู ุฅุถุงูุฉ ุงูููุงุท ุชููุงุฆูุงู
- ุญุณุจ ุนุฏุฏ ุฃูุงู ุงูุญุถูุฑ ุงููุชุชุงููุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู**: ุฌููุน ุงูุนูููุงุช ูุญููุฉ ุจุงูุตูุงุญูุงุช
2. **ุงูุฃุฏุงุก**: ุงุณุชุฎุฏุงู indexes ููุงุณุชุนูุงูุงุช ุงูุณุฑูุนุฉ
3. **ุงููุฑููุฉ**: ูููู ุชุฎุตูุต ููุงุนุฏ ุงูููุงุท ุจุณูููุฉ
4. **ุงูุชุฒุงูู**: ุงูููุงุท ุชุชุฒุงูู ูุน ุฌุฏูู Rewards

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ:
- ุฑุงุฌุน `LOYALTY_POINTS_README.md` ููุชูุงุตูู ุงููุงููุฉ
- ุงูุญุต ุณุฌูุงุช ุงูุฃุฎุทุงุก
- ุงุฎุชุจุฑ ุงูู API ุจุงุณุชุฎุฏุงู Postman
- ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ
